{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for interacting with the OpenAI API, specifically for chat completions and image analysis, designed for browser environment without SDK. It manages constructing API requests, handling responses, and parsing JSON content from OpenAI.", "external_files": ["../config/env"], "external_methods": ["getOpenAIKey"], "published": ["chatWithOpenAI", "analyzeImageWithOpenAI"], "classes": [], "methods": [{"name": "chatWithOpenAI(messages)", "description": "Sends a chat message history to OpenAI's Chat Completions API and returns the assistant's reply as a string.", "scope": "", "scopeKind": ""}, {"name": "analyzeImageWithOpenAI(imageDataUrl, userContext = '')", "description": "Sends an image and optional user guidance to OpenAI's Vision model for content assessment, returning a JSON object indicating inclusion and possible title, caption, and rationale.", "scope": "", "scopeKind": ""}, {"name": "ensureApiKey()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "safeParseJson(text)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch"], "search-terms": ["openaiClient", "chatWithOpenAI", "analyzeImageWithOpenAI", "Chat Completions API", "image analysis", "browser-only", "fetch", "JSON parsing"], "state": 2, "file_id": 14, "knowledge_revision": 40, "git_revision": "9f9e73230c108fb9dab20560515717a4f50e2b1d", "revision_history": [{"32": ""}, {"40": "9f9e73230c108fb9dab20560515717a4f50e2b1d"}], "ctags": [{"_type": "tag", "name": "OPENAI_CHAT_URL", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^const OPENAI_CHAT_URL = 'https:\\/\\/api.openai.com\\/v1\\/chat\\/completions';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "analyzeImageWithOpenAI", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^export async function analyzeImageWithOpenAI(imageDataUrl, userContext = '') {$/", "language": "JavaScript", "kind": "function", "signature": "(imageDataUrl, userContext = '')"}, {"_type": "tag", "name": "chatWithOpenAI", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^export async function chatWithOpenAI(messages) {$/", "language": "JavaScript", "kind": "function", "signature": "(messages)"}, {"_type": "tag", "name": "ensureApiKey", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^function ensureApiKey() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    messages: [$/", "language": "JavaScript", "kind": "property", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    messages: messages.map(m => ({ role: m.role, content: m.content })),$/", "language": "JavaScript", "kind": "property", "scope": "chatWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    model: 'gpt-4o-mini',$/", "language": "JavaScript", "kind": "property", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    model: 'gpt-4o-mini',$/", "language": "JavaScript", "kind": "property", "scope": "chatWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "analyzeImageWithOpenAI", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "chatWithOpenAI", "scopeKind": "class"}, {"_type": "tag", "name": "safeParseJson", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^function safeParseJson(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)"}, {"_type": "tag", "name": "temperature", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    temperature: 0.2,$/", "language": "JavaScript", "kind": "property", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "temperature", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    temperature: 0.3$/", "language": "JavaScript", "kind": "property", "scope": "chatWithOpenAI.payload", "scopeKind": "class"}], "hash": "28e885b49209d4535f80a8bb0f9ef9be", "format-version": 4, "code-base-name": "pdf_to_ppt_frontend", "filename": "pdf_to_ppt_frontend/src/services/openaiClient.js", "fields": [{"name": "messages: [", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "messages: messages.map(m => ({ role: m.role, content: m.content })),", "scope": "chatWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "model: 'gpt-4o-mini',", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "temperature: 0.2,", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "temperature: 0.3", "scope": "chatWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}]}