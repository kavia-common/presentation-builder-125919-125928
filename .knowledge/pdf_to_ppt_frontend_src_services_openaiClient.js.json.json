{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for interacting with the OpenAI API from a browser environment, specifically for chat completions, image analysis, slide planning, and outline refinement. It exports functions for sending messages, analyzing images, building slide outlines, and formatting outlines for chat display.", "external_files": ["../config/env"], "external_methods": ["getOpenAIKey"], "published": ["chatWithOpenAI", "analyzeImageWithOpenAI", "planSlidesWithOpenAI", "refineSlidesWithOpenAI", "formatOutlineForChat"], "classes": [], "methods": [{"name": "chatWithOpenAI(messages)", "description": "Sends a message array to OpenAI's Chat Completions API and returns the assistant's reply text.", "scope": "", "scopeKind": ""}, {"name": "analyzeImageWithOpenAI(imageDataUrl, userContext = '')", "description": "Sends an image and optional user guidance to OpenAI's Vision model to determine inclusion, caption, and rationale for a page image.", "scope": "", "scopeKind": ""}, {"name": "planSlidesWithOpenAI(pages, userGuidance = '')", "description": "Generates a slide outline based on provided page texts and optional guidance, grouping content into slides with titles and bullets.", "scope": "", "scopeKind": ""}, {"name": "refineSlidesWithOpenAI(pages, existingOutline, userFeedback = '')", "description": "Refines an existing slide outline based on user feedback and page texts, producing an updated outline.", "scope": "", "scopeKind": ""}, {"name": "formatOutlineForChat(outline)", "description": "Creates a human-readable summary of the slide outline for display in chat interactions.", "scope": "", "scopeKind": ""}, {"name": "ensureApiKey()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "safeParseJson(text)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch", "JSON.stringify", "JSON.parse"], "search-terms": ["openai", "chat", "slide outline", "image analysis", "presentation planning", "AI prompt", "OpenAI API"], "state": 2, "file_id": 14, "knowledge_revision": 54, "git_revision": "b0dc06803e248f37202187f81ed0c73101706a95", "revision_history": [{"32": ""}, {"40": "9f9e73230c108fb9dab20560515717a4f50e2b1d"}, {"54": "b0dc06803e248f37202187f81ed0c73101706a95"}], "ctags": [{"_type": "tag", "name": "OPENAI_CHAT_URL", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^const OPENAI_CHAT_URL = 'https:\\/\\/api.openai.com\\/v1\\/chat\\/completions';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "analyzeImageWithOpenAI", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^export async function analyzeImageWithOpenAI(imageDataUrl, userContext = '') {$/", "language": "JavaScript", "kind": "function", "signature": "(imageDataUrl, userContext = '')"}, {"_type": "tag", "name": "chatWithOpenAI", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^export async function chatWithOpenAI(messages) {$/", "language": "JavaScript", "kind": "function", "signature": "(messages)"}, {"_type": "tag", "name": "ensureApiKey", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^function ensureApiKey() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "formatOutlineForChat", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^export function formatOutlineForChat(outline) {$/", "language": "JavaScript", "kind": "function", "signature": "(outline)"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    messages: [$/", "language": "JavaScript", "kind": "property", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    messages: [$/", "language": "JavaScript", "kind": "property", "scope": "planSlidesWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    messages: [$/", "language": "JavaScript", "kind": "property", "scope": "refineSlidesWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    messages: messages.map(m => ({ role: m.role, content: m.content })),$/", "language": "JavaScript", "kind": "property", "scope": "chatWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    model: 'gpt-4o-mini',$/", "language": "JavaScript", "kind": "property", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    model: 'gpt-4o-mini',$/", "language": "JavaScript", "kind": "property", "scope": "chatWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    model: 'gpt-4o-mini',$/", "language": "JavaScript", "kind": "property", "scope": "planSlidesWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    model: 'gpt-4o-mini',$/", "language": "JavaScript", "kind": "property", "scope": "refineSlidesWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "analyzeImageWithOpenAI", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "chatWithOpenAI", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "planSlidesWithOpenAI", "scopeKind": "class"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^  const payload = {$/", "language": "JavaScript", "kind": "class", "scope": "refineSlidesWithOpenAI", "scopeKind": "class"}, {"_type": "tag", "name": "planSlidesWithOpenAI", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^export async function planSlidesWithOpenAI(pages, userGuidance = '') {$/", "language": "JavaScript", "kind": "function", "signature": "(pages, userGuidance = '')"}, {"_type": "tag", "name": "refineSlidesWithOpenAI", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^export async function refineSlidesWithOpenAI(pages, existingOutline, userFeedback = '') {$/", "language": "JavaScript", "kind": "function", "signature": "(pages, existingOutline, userFeedback = '')"}, {"_type": "tag", "name": "safeParseJson", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^function safeParseJson(text) {$/", "language": "JavaScript", "kind": "function", "signature": "(text)"}, {"_type": "tag", "name": "temperature", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    temperature: 0.2,$/", "language": "JavaScript", "kind": "property", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "temperature", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    temperature: 0.3$/", "language": "JavaScript", "kind": "property", "scope": "chatWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "temperature", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    temperature: 0.3,$/", "language": "JavaScript", "kind": "property", "scope": "planSlidesWithOpenAI.payload", "scopeKind": "class"}, {"_type": "tag", "name": "temperature", "path": "/home/kavia/workspace/code-generation/presentation-builder-125919-125928/pdf_to_ppt_frontend/src/services/openaiClient.js", "pattern": "/^    temperature: 0.3,$/", "language": "JavaScript", "kind": "property", "scope": "refineSlidesWithOpenAI.payload", "scopeKind": "class"}], "hash": "86ca5923d9b32fb21cbd0e2e5bc9ed23", "format-version": 4, "code-base-name": "pdf_to_ppt_frontend", "filename": "pdf_to_ppt_frontend/src/services/openaiClient.js", "fields": [{"name": "messages: [", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "messages: messages.map(m => ({ role: m.role, content: m.content })),", "scope": "chatWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "model: 'gpt-4o-mini',", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "temperature: 0.2,", "scope": "analyzeImageWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "temperature: 0.3", "scope": "chatWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}, {"name": "temperature: 0.3,", "scope": "planSlidesWithOpenAI.payload", "scopeKind": "class", "description": "unavailable"}]}